(window.webpackJsonp=window.webpackJsonp||[]).push([[548],{873:function(s,t,a){"use strict";a.r(t);var e=a(4),n=Object(e.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"tftp"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#tftp"}},[s._v("#")]),s._v(" tftp")]),s._v(" "),t("p",[s._v("在本机和tftp服务器之间使用TFTP协议传输文件")]),s._v(" "),t("h2",{attrs:{id:"补充说明"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#补充说明"}},[s._v("#")]),s._v(" 补充说明")]),s._v(" "),t("p",[t("strong",[s._v("tftp命令")]),s._v(" 用在本机和tftp服务器之间使用TFTP协议传输文件。")]),s._v(" "),t("p",[s._v("TFTP是用来下载远程文件的最简单网络协议，它其于UDP协议而实现。嵌入式linux的tftp开发环境包括两个方面：一是linux服务器端的tftp-server支持，二是嵌入式目标系统的tftp-client支持。因为u-boot本身内置支持tftp-client，所以嵌入式目标系统端就不用配置了。下面就详细介绍一下linux服务器端tftp-server的配置。")]),s._v(" "),t("h3",{attrs:{id:"语法"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#语法"}},[s._v("#")]),s._v(" 语法")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("tftp"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("选项"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("参数"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"选项"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#选项"}},[s._v("#")]),s._v(" 选项")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("-c：指定与tftp服务器连接成功后，立即要执行的指令；\n-m：指定文件传输模式。可以是ASCII或者Binary；\n-v：显示指令详细执行过程；\n-V：显示指令版本信息。\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("h3",{attrs:{id:"参数"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#参数"}},[s._v("#")]),s._v(" 参数")]),s._v(" "),t("p",[s._v("主机：指定tftp要联机的tftp服务器的ip地址或主机名。")]),s._v(" "),t("h3",{attrs:{id:"实例"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#实例"}},[s._v("#")]),s._v(" 实例")]),s._v(" "),t("p",[t("strong",[s._v("1、安装tftp服务器")])]),s._v(" "),t("p",[s._v("需要安装xinetd、tftp和tftp-server 3个软件")]),s._v(" "),t("p",[s._v("如果能上网，通过yum安装：")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("yum "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" xinetd\nyum "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" tftp\nyum "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" tftp-server\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("如果不能上网，可以直接安装提供的rpm包：")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("rpm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-ivh")]),s._v(" xinetd-2.3.14-18.fc9.i386.rpm\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("rpm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-ivh")]),s._v(" tftp-0.48-3.fc9.i386.rpm\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("rpm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-ivh")]),s._v(" tftp-server-0.48-3.fc9.i386.rpm\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[t("strong",[s._v("2、配置tftp服务器")])]),s._v(" "),t("p",[s._v("修改/etc/xinetd.d/tftp文件，将其中的disable=yes改为disable=no。主要是设置TFTP服务器的根目录，开启服务。修改后的文件如下：")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" tftp\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n       socket_type           "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("dgram\n       protocol              "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("udp\n       "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("wait")]),s._v("                  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("yes\n       user                  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("root\n       server                "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/sbin/in.tftpd\n       server_args           "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("-s  /home/mike/tftpboot "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-c")]),s._v("\n       disable               "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("no\n       per_source            "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v("\n       cps                   "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n       flags                 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("IPv4\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br")])]),t("p",[s._v("说明：修改项"),t("code",[s._v("server_args= -s <path> -c")]),s._v("，其中"),t("path",[s._v("处可以改为你的tftp-server的根目录，参数-s指定chroot，-c指定了可以创建文件。")])]),s._v(" "),t("p",[t("strong",[s._v("3、启动tftp服务器并关闭防火墙")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("/etc/init.d/iptables stop        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 关闭防火墙")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" /sbin/service xinetd start\n或\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" xinetd restart\n/etc/init.d/xinetd start\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("p",[s._v("看到启动[OK]就可以了")]),s._v(" "),t("p",[s._v("4、查看tftp服务是否开启")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("netstat")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-a")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" tftp\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("显示结果为"),t("code",[s._v("udp 0 0 *:tftp *:*")]),s._v("表明服务已经开启，就表明tftp配置成功了。")]),s._v(" "),t("p",[t("strong",[s._v("5、tftp使用")])]),s._v(" "),t("p",[s._v("复制一个文件到tftp服务器目录，然后在主机启动tftp软件，进行简单测试。")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("tftp "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.2\ntftp"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("get "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("download file"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" \n\ntftp"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("put "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("upload file"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\ntftp"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("q\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("p",[t("strong",[s._v("6、tftp命令用法如下")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("tftp your-ip-address\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("进入TFTP操作：")]),s._v(" "),t("ul",[t("li",[s._v("connect：连接到远程tftp服务器")]),s._v(" "),t("li",[s._v("mode：文件传输模式")]),s._v(" "),t("li",[s._v("put：上传文件")]),s._v(" "),t("li",[s._v("get：下载文件")]),s._v(" "),t("li",[s._v("quit：退出")]),s._v(" "),t("li",[s._v("verbose：显示详细的处理信息")]),s._v(" "),t("li",[s._v("tarce：显示包路径")]),s._v(" "),t("li",[s._v("status：显示当前状态信息")]),s._v(" "),t("li",[s._v("binary：二进制传输模式")]),s._v(" "),t("li",[s._v("ascii：ascii 传送模式")]),s._v(" "),t("li",[s._v("rexmt：设置包传输的超时时间")]),s._v(" "),t("li",[s._v("timeout：设置重传的超时时间")]),s._v(" "),t("li",[s._v("help：帮助信息")]),s._v(" "),t("li",[s._v("? ：帮助信息")])]),s._v(" "),t("p",[t("strong",[s._v("7、如果老是出现“AVC Denial, click icon to view”的错误，并不能传输文件，需要作如下修改")])]),s._v(" "),t("p",[s._v("修改"),t("code",[s._v("/etc/sysconfig/selinux")]),s._v(",将SELINUX设定为disable，使用命令"),t("code",[s._v("setenforce 0")]),s._v("让selinux配置文件生效。")]),s._v(" "),t("p",[t("strong",[s._v("8、Busybox中tftp命令的用法")])]),s._v(" "),t("p",[s._v("命令格式为：")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("tftp "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("option"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(". "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("host")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("port"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("如果要下载或上传文件的话是一定要用这些option的。")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-g")]),s._v(" 表示下载文件 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("get"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" 表示上传文件 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("put"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-l")]),s._v(" 表示本地文件名 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("local "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-r")]),s._v(" 表示远程主机的文件名 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("remote "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("p",[s._v("例如，要从远程主机192.168.1.2上下载 embedexpert，则应输入以下命令")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("tftp "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-g")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-r")]),s._v(" embedexpert "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.2\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])])])}),[],!1,null,null,null);t.default=n.exports}}]);