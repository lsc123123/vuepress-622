(window.webpackJsonp=window.webpackJsonp||[]).push([[635],{964:function(t,s,a){"use strict";a.r(s);var n=a(4),e=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("table",[s("thead",[s("tr",[s("th",{staticStyle:{"text-align":"center"}},[t._v("文件版本")]),t._v(" "),s("th",{staticStyle:{"text-align":"center"}},[t._v("修订日期")]),t._v(" "),s("th",{staticStyle:{"text-align":"center"}},[t._v("修订内容")]),t._v(" "),s("th",{staticStyle:{"text-align":"center"}},[t._v("作者")])])]),t._v(" "),s("tbody",[s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("v1.0")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("2024/6/28")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("初版规范")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("李思聪")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("v1.1")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("2024/7/6")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("新增注释格式")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("李思聪、彭凯辉")])])])]),t._v(" "),s("h1",{attrs:{id:"一、背景"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#一、背景"}},[t._v("#")]),t._v(" 一、背景")]),t._v(" "),s("p",[t._v("​\t在622团队中，项目需要共同协作完成，因个人差异的存在，每个人都会有不同的代码风格和习惯。想要高效率协同完成任务，统一的规范是必不可少的。")]),t._v(" "),s("h1",{attrs:{id:"二、目标"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#二、目标"}},[t._v("#")]),t._v(" 二、目标")]),t._v(" "),s("p",[t._v("​\t统一代码风格、命名规范，增强代码可读性和可维护性，提高团队协作的开发效率。")]),t._v(" "),s("h1",{attrs:{id:"三、编程规范"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#三、编程规范"}},[t._v("#")]),t._v(" 三、编程规范")]),t._v(" "),s("p",[s("span",{staticStyle:{"background-color":"yellow"}},[t._v("【强制】")]),t._v("必须遵守的规范")]),t._v(" "),s("p",[s("span",{staticStyle:{"background-color":"#c8e6c9"}},[t._v("【推荐】")]),t._v("希望遵守的规范")]),t._v(" "),s("p",[s("span",{staticStyle:{"background-color":"#ffcdd2"}},[t._v("【禁止】")]),t._v("禁止使用的规范")]),t._v(" "),s("p",[t._v("前提基础：模块化编程思想！")]),t._v(" "),s("p",[t._v("622实验室团队标识符：Stt（Six two two）")]),t._v(" "),s("h2",{attrs:{id:"流程梳理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#流程梳理"}},[t._v("#")]),t._v(" 流程梳理")]),t._v(" "),s("ol",[s("li",[s("span",{staticStyle:{"background-color":"#c8e6c9"}},[t._v("【推荐】")]),t._v("在开始编写代码之前，需要对实现逻辑十分清晰，建议在写代码之前先梳理流程并画出流程，一方面利于代码编写，另外一方面利于团队其他成员能够更快熟悉你所负责的部分。")])]),t._v(" "),s("h2",{attrs:{id:"命名规则"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#命名规则"}},[t._v("#")]),t._v(" 命名规则")]),t._v(" "),s("ol",[s("li",[s("span",{staticStyle:{"background-color":"yellow"}},[t._v("【强制】")]),t._v("对于一些目录名、文件名、变量名全部都用小写，并且除目录名、变量名外都得带上stt团队标识符，模块简称，单词间以下划线_连接。")])]),t._v(" "),s("div",{staticClass:"language-C line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-c"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//目录名")]),t._v("\ndevice\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//文件名")]),t._v("\nstt_dev_esp8266"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("c\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//变量名")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("char")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("file_name "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NULL")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br")])]),s("ol",{attrs:{start:"2"}},[s("li",[s("span",{staticStyle:{"background-color":"yellow"}},[t._v("【强制】")]),t._v("静态全局变量加s_前缀，常量加c_前缀")])]),t._v(" "),s("div",{staticClass:"language-C line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-c"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("int16_t")]),t._v(" s_flag "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("int16_t")]),t._v(" c_flag "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br")])]),s("ol",{attrs:{start:"3"}},[s("li",[s("span",{staticStyle:{"background-color":"yellow"}},[t._v("【强制】")]),t._v("函数名、结构体、枚举、类型定义等每个单词首字母大写，加团队标识符、模块名与子模块名前缀，前缀以下划线_连接")])]),t._v(" "),s("p",[t._v("其中"),s("strong",[t._v("Stt")]),t._v("为团队标识符，"),s("strong",[t._v("Dev")]),t._v("表示设备模块，"),s("strong",[t._v("Wifi")]),t._v("为子模块名，"),s("strong",[t._v("Config")]),t._v("为函数的功能名(做到见字知其意)")]),t._v(" "),s("div",{staticClass:"language-C line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-c"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("SttDev_Wifi_Config")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("ol",{attrs:{start:"4"}},[s("li",[s("span",{staticStyle:{"background-color":"yellow"}},[t._v("【强制】")]),t._v("宏定义、枚举值所有字母大写，加模块名与子模块名缩写前缀前缀以下划线_连接。")])]),t._v(" "),s("div",{staticClass:"language-c line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-c"}},[s("code",[s("span",{pre:!0,attrs:{class:"token macro property"}},[s("span",{pre:!0,attrs:{class:"token directive-hash"}},[t._v("#")]),s("span",{pre:!0,attrs:{class:"token directive keyword"}},[t._v("define")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token macro-name"}},[t._v("STTDEV_WIFI_OPEN")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token expression"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")])])]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("ol",{attrs:{start:"5"}},[s("li",[s("span",{staticStyle:{"background-color":"#c8e6c9"}},[t._v("【推荐】")]),t._v("函数、变量等命名要采用有意义的完整单词命名,避免使用有歧义的缩写。")]),t._v(" "),s("li",[s("span",{staticStyle:{"background-color":"#ffcdd2"}},[t._v("【禁止】")]),t._v("除i、j、k用于循环变量外,禁止使用单字母或aaa等无意义义的命名。")]),t._v(" "),s("li",[s("span",{staticStyle:{"background-color":"yellow"}},[t._v("【强制】")]),t._v("命名习惯应时刻保持，就算很久以后在代码临时加个变量，写个函数都依旧要保持规范习惯")])]),t._v(" "),s("h2",{attrs:{id:"变量、常量与宏"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#变量、常量与宏"}},[t._v("#")]),t._v(" 变量、常量与宏")]),t._v(" "),s("ol",[s("li",[s("p",[s("span",{staticStyle:{"background-color":"yellow"}},[t._v("【强制】")]),t._v("整数类型使用C99中<stdint.h>定义的扩展整数类型intN_t 、uintN_t（比如uint8_t、uint16_t）。避免直接使用int。")])]),t._v(" "),s("li",[s("p",[s("span",{staticStyle:{"background-color":"yellow"}},[t._v("【强制】")]),t._v("对于一些全局变量必须添加static进行修饰，不能直接在多个文件间相互使用，想要跨文件使用必须在提供函数接口（"),s("strong",[t._v("不能直接使用！！")]),t._v("）。比如：")]),t._v(" "),s("div",{staticClass:"language-c line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-c"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//wifi.c")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("uint8_t")]),t._v(" s_flag"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("uint8_t")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Stt_App_WifiFlag_Get")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("s_flag"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Stt_App_WifiFlag_Set")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("uint8_t")]),t._v(" flag"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\ts_flag "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" flag"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br")])]),s("p",[s("strong",[t._v("使用常量、宏或枚举进行数字的定义")]),t._v("。")])]),t._v(" "),s("li",[s("p",[s("span",{staticStyle:{"background-color":"yellow"}},[t._v("【强制】")]),t._v("用宏定义表达式时,要使用完备的括号。")])])]),t._v(" "),s("div",{staticClass:"language-c line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-c"}},[s("code",[s("span",{pre:!0,attrs:{class:"token macro property"}},[s("span",{pre:!0,attrs:{class:"token directive-hash"}},[t._v("#")]),s("span",{pre:!0,attrs:{class:"token directive keyword"}},[t._v("define")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token macro-name"}},[t._v("STTTEST")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token expression"}},[s("span",{pre:!0,attrs:{class:"token number"}},[t._v("123")]),t._v("\t\t")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//这种不行")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token macro property"}},[s("span",{pre:!0,attrs:{class:"token directive-hash"}},[t._v("#")]),s("span",{pre:!0,attrs:{class:"token directive keyword"}},[t._v("define")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token macro-name"}},[t._v("STTTEST")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token expression"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("123")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\t")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//OK")])]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token macro property"}},[s("span",{pre:!0,attrs:{class:"token directive-hash"}},[t._v("#")]),s("span",{pre:!0,attrs:{class:"token directive keyword"}},[t._v("define")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token macro-name function"}},[t._v("STTTEST")]),s("span",{pre:!0,attrs:{class:"token expression"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("a"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("b"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \ta"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("b\t\t\t")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//这种不行")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token macro property"}},[s("span",{pre:!0,attrs:{class:"token directive-hash"}},[t._v("#")]),s("span",{pre:!0,attrs:{class:"token directive keyword"}},[t._v("define")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token macro-name function"}},[t._v("STTTEST")]),s("span",{pre:!0,attrs:{class:"token expression"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("a"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("b"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("a"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("b"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\t\t")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//不行")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token macro property"}},[s("span",{pre:!0,attrs:{class:"token directive-hash"}},[t._v("#")]),s("span",{pre:!0,attrs:{class:"token directive keyword"}},[t._v("define")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token macro-name function"}},[t._v("STTTEST")]),s("span",{pre:!0,attrs:{class:"token expression"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("a"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("b"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("a"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("b"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\t")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//OK")])]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br")])]),s("ol",{attrs:{start:"4"}},[s("li",[s("span",{staticStyle:{"background-color":"yellow"}},[t._v("【强制】")]),t._v("宏定义统一在.h中进行定义。")])]),t._v(" "),s("h2",{attrs:{id:"函数"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#函数"}},[t._v("#")]),t._v(" 函数")]),t._v(" "),s("ol",[s("li",[s("span",{staticStyle:{"background-color":"yellow"}},[t._v("【强制】")]),t._v("模块内部调用的函数必须要加static防止外部调用。")]),t._v(" "),s("li",[s("span",{staticStyle:{"background-color":"yellow"}},[t._v("【强制】")]),t._v("函数如果有参数必须需要对参数合法性进行检查和处理。")]),t._v(" "),s("li",[s("span",{staticStyle:{"background-color":"yellow"}},[t._v("【强制】")]),t._v("函数错误码类型使用int32_t，返回C标准库<errno.h>的通用错误码或各模块内的专用错误码，避免直接返回数值，函数成功返回值为0")]),t._v(" "),s("li",[s("span",{staticStyle:{"background-color":"yellow"}},[t._v("【强制】")]),t._v("函数编写完成后，若函数内部有文件IO操作，缓冲区申请操作等容易产生段错误的操作，需要反复检查保证有打开有关闭、有申请有释放")]),t._v(" "),s("li",[s("span",{staticStyle:{"background-color":"#ffcdd2"}},[t._v("【禁止】")]),t._v("禁止使用超过1KB的局部变量。大数据量使用动态申请或者静态全局，避免堆栈溢出。")]),t._v(" "),s("li",[s("span",{staticStyle:{"background-color":"#c8e6c9"}},[t._v("【推荐】")]),t._v("重复代码或者功能尽量整理成通用函数或功能函数。")])]),t._v(" "),s("h2",{attrs:{id:"头文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#头文件"}},[t._v("#")]),t._v(" 头文件")]),t._v(" "),s("ol",[s("li",[s("span",{staticStyle:{"background-color":"yellow"}},[t._v("【强制】")]),t._v("头文件用于声明该模块的对外接口和数据结构，通过头文件能了解该模块所有功能接口。")]),t._v(" "),s("li",[s("span",{staticStyle:{"background-color":"yellow"}},[t._v("【强制】")]),t._v("使用#define防止多重包含，宏为文件夹名+文件名，所有字母大写，前后加双下划线__。")]),t._v(" "),s("li",[s("span",{staticStyle:{"background-color":"#c8e6c9"}},[t._v("【推荐】")]),t._v("头文件引用排序即可划分开")])]),t._v(" "),s("div",{staticClass:"language-c line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-c"}},[s("code",[s("span",{pre:!0,attrs:{class:"token macro property"}},[s("span",{pre:!0,attrs:{class:"token directive-hash"}},[t._v("#")]),s("span",{pre:!0,attrs:{class:"token directive keyword"}},[t._v("include")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("<stdio.h>")]),t._v("\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//系统标准库")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//空行")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//空行")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token macro property"}},[s("span",{pre:!0,attrs:{class:"token directive-hash"}},[t._v("#")]),s("span",{pre:!0,attrs:{class:"token directive keyword"}},[t._v("include")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("<XXXX.h>")]),t._v("\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//移植的第三方库")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//空行")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//空行")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token macro property"}},[s("span",{pre:!0,attrs:{class:"token directive-hash"}},[t._v("#")]),s("span",{pre:!0,attrs:{class:"token directive keyword"}},[t._v("include")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"wifi.h"')]),t._v("\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//自定义的头文件")])]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br")])]),s("h2",{attrs:{id:"安全规范"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#安全规范"}},[t._v("#")]),t._v(" 安全规范")]),t._v(" "),s("ol",[s("li",[s("p",[s("span",{staticStyle:{"background-color":"yellow"}},[t._v("【强制】")]),t._v("在动态申请内存时，无使用情况下必须释放")])]),t._v(" "),s("li",[s("p",[s("span",{staticStyle:{"background-color":"yellow"}},[t._v("【强制】")]),t._v("在循环中若有申请内存操作，应该注意避免出现多次释放的操作")])]),t._v(" "),s("li",[s("p",[s("span",{staticStyle:{"background-color":"yellow"}},[t._v("【强制】")]),t._v("在不满足条件或者发生异常错误函数需要return时，一定要注意return前是否有申请的资源未释放")])]),t._v(" "),s("li",[s("p",[s("span",{staticStyle:{"background-color":"yellow"}},[t._v("【强制】")]),t._v("编写代码时时刻注意避免出现野指针")])]),t._v(" "),s("li",[s("p",[t._v("...")])])]),t._v(" "),s("h2",{attrs:{id:"排版格式"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#排版格式"}},[t._v("#")]),t._v(" 排版格式")]),t._v(" "),s("ol",[s("li",[s("span",{staticStyle:{"background-color":"yellow"}},[t._v("【强制】")]),t._v("采用缩进风格，对齐使用Tab键，缩进为1个Tab。")]),t._v(" "),s("li",[s("span",{staticStyle:{"background-color":"yellow"}},[t._v("【强制】")]),t._v("函数内相对独立的程序块加空行用于区分，函数间加空行用于区分。")]),t._v(" "),s("li",[s("span",{staticStyle:{"background-color":"yellow"}},[t._v("【强制】")]),t._v("大括号单独换行。如下")])]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('if(XX)\n{\n\tprintf("hello\\n");\n}\n')])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br")])]),s("ol",{attrs:{start:"4"}},[s("li",[s("span",{staticStyle:{"background-color":"yellow"}},[t._v("【强制】")]),t._v("注释内容要清晰准确，解释代码难以直接表达的意图而不是重复描述代码。")]),t._v(" "),s("li",[s("span",{staticStyle:{"background-color":"yellow"}},[t._v("【强制】")]),t._v("注释内容要与代码保持一致，修改代码时要同时更新注释内容")]),t._v(" "),s("li",[s("span",{staticStyle:{"background-color":"#c8e6c9"}},[t._v("【推荐】")]),t._v("对于已经注释的代码，可进行估测往后是否还有作用，没有参考价值最好删掉。")])]),t._v(" "),s("h2",{attrs:{id:"注释格式"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#注释格式"}},[t._v("#")]),t._v(" 注释格式")]),t._v(" "),s("h3",{attrs:{id:"_1-注释原则"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-注释原则"}},[t._v("#")]),t._v(" 1.注释原则")]),t._v(" "),s("p",[t._v("项目开发中，尽量保持代码注释规范和统一。")]),t._v(" "),s("p",[t._v("注释方便了代码的阅读和维护。")]),t._v(" "),s("p",[t._v("边写代码边注释，修改代码时要相应修改注释，保证注释和代码的一致性。")]),t._v(" "),s("p",[t._v("注释要简洁明确，不要出现形容词。")]),t._v(" "),s("p",[t._v("通过注释可以快速知道所写函数的功能，返回值，参数的使用。")]),t._v(" "),s("h3",{attrs:{id:"_2-文件头部注释"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-文件头部注释"}},[t._v("#")]),t._v(" 2.文件头部注释")]),t._v(" "),s("div",{staticClass:"language-c line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-c"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/********************************************************************************\n* @File name: biu.c\n* @Author: fangqw\n* @Version: 1.1\n* @Date: 2021-3-19\n* @Description: The function interface。\n********************************************************************************/")]),t._v("\n还可以增加：版权说明等。\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br")])]),s("h3",{attrs:{id:"_3-结构体、全局变量等的注释"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-结构体、全局变量等的注释"}},[t._v("#")]),t._v(" 3.结构体、全局变量等的注释")]),t._v(" "),s("div",{staticClass:"language-c line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-c"}},[s("code",[s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("int64_t")]),t._v(" s_num"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*全局变量的作用*/")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*结构体的功能*/")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("typedef")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("struct")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SttTest_Wifi")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("int64_t")]),t._v(" h"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*High risk*/")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("int64_t")]),t._v(" l"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*Low risk*/")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("int64_t")]),t._v(" m"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*Middle risk*/")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("int64_t")]),t._v(" i"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*Information risk*/")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("SttTest_Wifi_t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br")])]),s("h3",{attrs:{id:"_4-函数的注释"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-函数的注释"}},[t._v("#")]),t._v(" 4.函数的注释")]),t._v(" "),s("div",{staticClass:"language-c line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-c"}},[s("code",[t._v("函数头部应进行注释，列出：函数的目的"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("功能、输入参数、输出参数、返回值、调用关系（函数、表）等\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/********************************************************\n* Function name ：SttSql_Insert_History\n* Description        : Insert to bd_host_history\n* Parameter         ：\n* @ipsql            SQL statement \n* @host_level        Risk level    \n* @total            The total number of risk \n* @t_id            task id\n* @t_uuid            task uuid\n* @ipaddr            target ipaddr    \n* @end_time        task end time\n* Return          ：0 --success  ,  other -- fail\n**********************************************************/")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("int64_t")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("SttSql_Insert_History")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("char")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" ipsql"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("SttTest_Wifi_t host_level"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("int64_t")]),t._v(" total"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("int64_t")]),t._v(" t_id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("char")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" t_uuid"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("char")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" ipaddr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("int64_t")]),t._v(" end_time"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*\n    *    如果程序过于复杂，这里可以写明，具体算法和思路。\n    */")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br")])]),s("h3",{attrs:{id:"_5-建议"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-建议"}},[t._v("#")]),t._v(" 5.建议")]),t._v(" "),s("p",[t._v("一般情况下，源程序有效注释量必须在20％以上。 注释不宜太多、不宜太少，准确易懂简洁；")]),t._v(" "),s("p",[t._v("注释格式尽量统一，建议使用“/* …… */”；")]),t._v(" "),s("p",[t._v("避免在一行代码或表达式的中间插入注释；")]),t._v(" "),s("p",[t._v("说明：除非必要，不应在代码或表达中间插入注释， 否则容易使代码可理解性变差。")]),t._v(" "),s("p",[t._v("通过对函数或过程、变量、结构等正确的命名以及合理地组织代码的结构，使代码成为自注释的。")]),t._v(" "),s("p",[t._v("清晰 准确的函数、变量等的命名，可增加代码可读性，并减少不必要的注释。")]),t._v(" "),s("p",[t._v("在代码的功能、意图层次上进行注释，提供有用、额外的信息。")]),t._v(" "),s("p",[t._v("说 明：注释的目的是解释代码的目的、功能和采用的方法，提供代码以外的信息，帮助读者理解代码，防止没必要的重复注释信息。")]),t._v(" "),s("h2",{attrs:{id:"调试"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#调试"}},[t._v("#")]),t._v(" 调试")]),t._v(" "),s("ol",[s("li",[s("span",{staticStyle:{"background-color":"yellow"}},[t._v("【强制】")]),t._v("所有嵌入式项目可以统一使用一个LOG模块，不同类别的调试打印信息需要有对应的LOG等级，每一条打印信息必须包含年月日时分秒毫秒。（LOG模块代码开发由各个项目组负责人参与撰写与维护迭代，各项目通用）")]),t._v(" "),s("li",[s("span",{staticStyle:{"background-color":"yellow"}},[t._v("【强制】")]),t._v("调试信息要打印有用，能定位问题的信息，避免打印111、222这种无意义LOG。")])]),t._v(" "),s("h2",{attrs:{id:"代码审查"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#代码审查"}},[t._v("#")]),t._v(" 代码审查")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",{staticStyle:{"text-align":"center"}},[t._v("防线")]),t._v(" "),s("th",{staticStyle:{"text-align":"center"}},[t._v("责任人")]),t._v(" "),s("th",{staticStyle:{"text-align":"center"}},[t._v("负责工作")])])]),t._v(" "),s("tbody",[s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("第一道防线")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("开发者本人")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("在功能点实现完成后，应当进行烧录自测，和代码的重新审查，逻辑重新梳理，防止出现BUG")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("第二道防线")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("项目组负责人或成员")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("在开发者本人经过第一道防线后，提交代码到临时分支，项目组负责人或成员需要对其代码进行二次审查，审查没问题后将代码合并到项目分支")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}}),t._v(" "),s("td",{staticStyle:{"text-align":"center"}}),t._v(" "),s("td",{staticStyle:{"text-align":"center"}})])])]),t._v(" "),s("h1",{attrs:{id:"项目代码合作开发建议"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#项目代码合作开发建议"}},[t._v("#")]),t._v(" 项目代码合作开发建议")]),t._v(" "),s("p",[s("span",{staticStyle:{"background-color":"#c8e6c9"}},[t._v("【推荐】")]),t._v("举个例子：当项目中用到DHT11、GY302光敏传感器等以及ESP8266、LoRa通讯模块,需要通过通讯模块上传温湿度、光照数据。我们可以将其划分为驱动层、应用层，目录结构可以是如下")]),t._v(" "),s("p",[t._v("基于驱动层目录结构：")]),t._v(" "),s("p",[t._v("​\tdevice\t（驱动：提供底层接口）")]),t._v(" "),s("p",[t._v("​\t\t-> sensor")]),t._v(" "),s("p",[t._v("​\t\t\tstt_dev_dht11.c")]),t._v(" "),s("p",[t._v("​\t\t\tstt_dev_dht11.h")]),t._v(" "),s("p",[t._v("​\t\t\tstt_dev_gy302.c")]),t._v(" "),s("p",[t._v("​\t\t\tstt_dev_gy302.h")]),t._v(" "),s("p",[t._v("​\t\t-> communication")]),t._v(" "),s("p",[t._v("​\t\t\tstt_dev_esp8266.c")]),t._v(" "),s("p",[t._v("​\t\t\tstt_dev_esp8266.h")]),t._v(" "),s("p",[t._v("​\t\t\tstt_dev_lora.c")]),t._v(" "),s("p",[t._v("​\t\t\tstt_dev_lora.h")]),t._v(" "),s("p",[t._v("基于应用层：")]),t._v(" "),s("p",[t._v("​\tapp\t（应用层：）")]),t._v(" "),s("p",[t._v("​\t\t-> data")]),t._v(" "),s("p",[t._v("​\t\t\tstt_app_data.c\t\t//提供获取各种所需形式数据的接口")]),t._v(" "),s("p",[t._v("​\t\t\tstt_app_data.h")]),t._v(" "),s("p",[t._v("​\t\t-> msg_handler")]),t._v(" "),s("p",[t._v("​\t\t\tstt_app_wifi.c\t\t//以WiFi为发送媒介的业务逻辑")]),t._v(" "),s("p",[t._v("​\t\t\tstt_app_wifi.h")]),t._v(" "),s("p",[t._v("​\t\t\tstt_app_lora.c\t\t//以Lora为发送媒介的业务逻辑")]),t._v(" "),s("p",[t._v("​\t\t\tstt_app_lora.h")]),t._v(" "),s("p",[t._v("​\t"),s("span",{staticStyle:{"background-color":"#c8e6c9"}},[t._v("【推荐】")]),t._v("不管每个人负责什么模块，都应该时刻以调用者什么都不知道什么都不懂的心态去封装接口，其他人调用你的接口就能实现他所需要的功能，而不需要关心你的接口里面做了什么。")])])}),[],!1,null,null,null);s.default=e.exports}}]);