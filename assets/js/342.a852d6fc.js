(window.webpackJsonp=window.webpackJsonp||[]).push([[342],{666:function(s,a,e){"use strict";e.r(a);var t=e(4),r=Object(t.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"mkcert"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mkcert"}},[s._v("#")]),s._v(" mkcert")]),s._v(" "),a("p",[s._v("用来生成自签证书的工具")]),s._v(" "),a("h2",{attrs:{id:"示例"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#示例"}},[s._v("#")]),s._v(" 示例")]),s._v(" "),a("p",[a("code",[s._v("mkcert")]),s._v(" 是 GO 编写的，一个简单的"),a("strong",[s._v("零配置")]),s._v("的用来生成自签证书的工具。")]),s._v(" "),a("p",[s._v("下面给一个简单的示例，在本地生成自签证书，并使用让 nc 使用生成的证书。")]),s._v(" "),a("div",{staticClass:"language-zsh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('~ ·········································································································································  10:46:25\n❯ mkcert -install\nThe local CA is already installed in the system trust store! 👍The local CA is already installed in the Firefox and/or Chrome/Chromium trust store! 👍\n~ ·········································································································································  10:46:34\n❯ mkcert example.com "*.example.com" example.test localhost 127.0.0.1 ::1\n\nCreated a new certificate valid for the following names 📜 - "example.com"\n - "*.example.com"\n - "example.test"\n - "localhost"\n - "127.0.0.1"\n - "::1"\n\nReminder: X.509 wildcards only go one level deep, so this won\'t match a.b.example.com ℹ️\n\nThe certificate is at "./example.com+5.pem" and the key at "./example.com+5-key.pem" ✅\nIt will expire on 30 January 2025 🗓\n\n~ ·········································································································································  10:47:37\n❯ ls             \n公共  视频  文档  音乐  aria          aria2-downloads  Dockerfile             example.com+5.pem  GOPATH  minio-binaries  nowip_hosts.txt  tech_backend.jar\n模板  图片  下载  桌面  aria2-config  cv_debug.log     example.com+5-key.pem  go                 math    navicat_reset   src\n~ ·········································································································································  10:47:55\n❯ ncat -lvp 1589 --ssl-key example.com+5-key.pem --ssl-cert example.com+5.pem \nNcat: Version 7.92 ( https://nmap.org/ncat )\nNcat: Listening on :::1589\nNcat: Listening on 0.0.0.0:1589\nNcat: Connection from 127.0.0.1.\nNcat: Connection from 127.0.0.1:39156.\nNcat: Failed SSL connection from 127.0.0.1: error:00000000:lib(0):func(0):reason(0)\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br")])]),a("p",[a("code",[s._v("mkcert")]),s._v(" 自动生成并安装一个本地 CA 到 root stores，并且生成 locally-trusted 证书。"),a("code",[s._v("mkcert")]),s._v(" 不会自动使用证书来配置服务器，不过，这取决于你。")]),s._v(" "),a("h2",{attrs:{id:"安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装"}},[s._v("#")]),s._v(" 安装")]),s._v(" "),a("blockquote",[a("p",[s._v("Warning: "),a("code",[s._v("mkcert")]),s._v(" 自动生成的 "),a("code",[s._v("rootCA-key.pem")]),s._v(" 文件提供了完整的能力来拦截你机器上的安全请求。请不要分享它。")])]),s._v(" "),a("h3",{attrs:{id:"macos"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#macos"}},[s._v("#")]),s._v(" macOS")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("$ brew "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" mkcert\n$ brew "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" nss "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 如果用 Firefox 的话")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h3",{attrs:{id:"linux"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#linux"}},[s._v("#")]),s._v(" Linux")]),s._v(" "),a("p",[s._v("在 Linux 上，首先要安装 "),a("code",[s._v("certutil")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" libnss3-tools\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#    -or-")]),s._v("\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" yum "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" nss-tools\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#    -or-")]),s._v("\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" pacman "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-S")]),s._v(" nss\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#    -or-")]),s._v("\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("zypper")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" mozilla-nss-tools\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("p",[s._v("然后可以使用 "),a("a",{attrs:{href:"https://docs.brew.sh/Homebrew-on-Linux",target:"_blank",rel:"noopener noreferrer"}},[s._v("Homebrew on Linux"),a("OutboundLink")],1),s._v(" 来安装。")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("$ brew "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" mkcert\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("或者从源码构建（要求 Go 1.13+）")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" clone https://github.com/FiloSottile/mkcert "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" mkcert\ngo build "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-ldflags")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"-X main.Version='),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" describe "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--tags")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v('"')]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("又或者使用 "),a("a",{attrs:{href:"https://github.com/FiloSottile/mkcert/releases",target:"_blank",rel:"noopener noreferrer"}},[s._v("预构建的二进制文件"),a("OutboundLink")],1),s._v("。")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-JLO")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"https://dl.filippo.io/mkcert/latest?for=linux/amd64"')]),s._v("\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" +x mkcert-v*-linux-amd64\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" mkcert-v*-linux-amd64 /usr/local/bin/mkcert\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[s._v("对于 Arch Linux 用户（比如我），"),a("a",{attrs:{href:"https://www.archlinux.org/packages/community/x86_64/mkcert/",target:"_blank",rel:"noopener noreferrer"}},[a("code",[s._v("mkcert")]),a("OutboundLink")],1),s._v(" 在 Arch Linux 官方仓库中可用。")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" pacman "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-S")]),s._v(" mkcert\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"windows"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#windows"}},[s._v("#")]),s._v(" Windows")]),s._v(" "),a("p",[s._v("使用 "),a("a",{attrs:{href:"https://chocolatey.org/",target:"_blank",rel:"noopener noreferrer"}},[s._v("Chocolatey"),a("OutboundLink")],1)]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("$ choco "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" mkcert\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("或者使用 Scoop")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("$ scoop bucket "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" extras\n$ scoop "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" mkcert\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("或者从源码构建（要求 Go 1.10+） ，或者使用 "),a("a",{attrs:{href:"https://github.com/FiloSottile/mkcert/releases",target:"_blank",rel:"noopener noreferrer"}},[s._v("预构建的二进制文件"),a("OutboundLink")],1),s._v("。")]),s._v(" "),a("p",[s._v("如果遇到权限问题，请使用管理员运行 "),a("code",[s._v("mkcert")])]),s._v(" "),a("h2",{attrs:{id:"支持的-root-stores"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#支持的-root-stores"}},[s._v("#")]),s._v(" 支持的 root stores")]),s._v(" "),a("p",[a("code",[s._v("mkcert")]),s._v(" 支持以下 root stores：")]),s._v(" "),a("ul",[a("li",[s._v("macOS system store")]),s._v(" "),a("li",[s._v("Windows system store")]),s._v(" "),a("li",[s._v("Linux 发行版提供\n"),a("ul",[a("li",[a("code",[s._v("update-ca-trust")]),s._v(" （Fedora，RHEL，CentOS）或者")]),s._v(" "),a("li",[a("code",[s._v("update-ca-certificates")]),s._v(" （Ubuntu，Debian，OpenSUSE，SLES）或者")]),s._v(" "),a("li",[a("code",[s._v("trust")]),s._v(" （Arch）")])])]),s._v(" "),a("li",[s._v("Firefox （仅 macOS 和 Linux）")]),s._v(" "),a("li",[s._v("Chrome 和 Chromium")]),s._v(" "),a("li",[s._v("Java（当 "),a("code",[s._v("JAVA_HOME")]),s._v(" 被设置时）")])]),s._v(" "),a("p",[s._v("为了把 local root CA 装到这些 root stores 中，你可以设置 "),a("code",[s._v("TRUST_STORES")]),s._v(' 环境变量到一个逗号分隔的 list。有这些选项："system","java" 和 "nss"（包括了 Firefox）。')]),s._v(" "),a("h2",{attrs:{id:"高级-topics"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#高级-topics"}},[s._v("#")]),s._v(" 高级 topics")]),s._v(" "),a("h3",{attrs:{id:"高级选项"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#高级选项"}},[s._v("#")]),s._v(" 高级选项")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("-cert-file FILE, -key-file FILE, -p12-file FILE\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 自定义输出路径.")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-client")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 生成供客户端认证使用的证书.")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-ecdsa")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 生成使用一个 ECDSA （一种椭圆曲线签名算法）key 来生成证书.")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-pkcs12")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# 生成一个 ".p12" PKCS #12 文件，也可以被识别为 ".pfx" 文件,')]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 包含 cert 和 key for legacy applications.")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-csr")]),s._v(" CSR "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 生成一个给予 CSR（证书签名申请） 的证书。")]),s._v("\n         "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 与除了 -install 和 -cert-file 以外的其它所以 flag 和参数冲突！")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("p",[a("a",{attrs:{href:"https://cloud.tencent.com/document/product/400/5367",target:"_blank",rel:"noopener noreferrer"}},[s._v("SSL 证书 什么是CSR？-常见问题-文档中心-腾讯云"),a("OutboundLink")],1)]),s._v(" "),a("blockquote",[a("p",[a("strong",[s._v("请注意！")]),s._v(" 你必须把这些选项放在域名列表之前。")])]),s._v(" "),a("h3",{attrs:{id:"例如"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#例如"}},[s._v("#")]),s._v(" 例如")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("mkcert -key-file key.pem -cert-file cert.pem example.com *.example.com\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"s-mime-邮件安全证书"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#s-mime-邮件安全证书"}},[s._v("#")]),s._v(" S/MIME （邮件安全证书）")]),s._v(" "),a("p",[s._v("用下面这种方式 "),a("code",[s._v("mkcert")]),s._v(" 会生成一个 S/MIME 证书：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("mkcert filippo@example.com\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"移动设备"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#移动设备"}},[s._v("#")]),s._v(" 移动设备")]),s._v(" "),a("p",[s._v("对于要让移动设备信任证书的情况，你得安装 root CA。就是 "),a("code",[s._v("rootCA.pem")]),s._v(" 这个文件，可以通过 "),a("code",[s._v("mkcert -CAROOT")]),s._v(" 打印出这个文件所在的目录。")]),s._v(" "),a("p",[s._v("在 iOS 上，你也可以使用 AirDrop，把 CA 邮件发给你自己，或者通过一个 HTTP server 提供它。在打开它之后，你需要  "),a("a",{attrs:{href:"https://github.com/FiloSottile/mkcert/issues/233#issuecomment-690110809",target:"_blank",rel:"noopener noreferrer"}},[s._v("install the profile in Settings > Profile Downloaded"),a("OutboundLink")],1),s._v(" and then "),a("a",{attrs:{href:"https://support.apple.com/en-nz/HT204477",target:"_blank",rel:"noopener noreferrer"}},[s._v("enable full trust in it"),a("OutboundLink")],1),s._v(" 。")]),s._v(" "),a("p",[s._v("对于 Android ，你得安装这个 CA 然后在应用程序的开发版本中启用 user roots。可以看一看这个 "),a("a",{attrs:{href:"https://stackoverflow.com/a/22040887/749014",target:"_blank",rel:"noopener noreferrer"}},[s._v("StackOverflow 回答"),a("OutboundLink")],1),s._v(" 。")]),s._v(" "),a("h3",{attrs:{id:"用-node-js-来使用这个-root"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#用-node-js-来使用这个-root"}},[s._v("#")]),s._v(" 用 Node.js 来使用这个 root")]),s._v(" "),a("p",[s._v("Node 不使用 system root store，所以它不会自动接受 "),a("code",[s._v("mkcert")]),s._v(" 证书。相反，你得设置 "),a("a",{attrs:{href:"https://nodejs.org/api/cli.html#cli_node_extra_ca_certs_file",target:"_blank",rel:"noopener noreferrer"}},[a("code",[s._v("NODE_EXTRA_CA_CERTS")]),a("OutboundLink")],1),s._v(" 环境变量。")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("NODE_EXTRA_CA_CERTS")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),s._v("mkcert "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-CAROOT")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v('/rootCA.pem"')]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"改变-ca-文件的位置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#改变-ca-文件的位置"}},[s._v("#")]),s._v(" 改变 CA 文件的位置")]),s._v(" "),a("p",[s._v("CA 证书和它的 key 被存储在用户家目录的一个文件夹中。一般来说你不会想去关注它的位置，因为它会被自动装载。但是你可以通过 "),a("code",[s._v("mkcert -CAROOT")]),s._v(" 来打印这个目录位置。")]),s._v(" "),a("p",[s._v("如果你想要管理单独的 CA 们，你可以使用 "),a("code",[s._v("\\$CAROOT")]),s._v(" 环境变量来设置 mkcert 放置和寻找 CA files 的路径。")]),s._v(" "),a("h3",{attrs:{id:"在其它系统上安装-ca"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#在其它系统上安装-ca"}},[s._v("#")]),s._v(" 在其它系统上安装 CA")]),s._v(" "),a("p",[s._v("安装 trust store 不需要 CA key（只要 CA），所以你可以导出 CA，并且使用 "),a("code",[s._v("mkcert")]),s._v(" 来安装到其它机器上。")]),s._v(" "),a("ul",[a("li",[s._v("找到 "),a("code",[s._v("rootCA.pem")]),s._v(" 文件，可以用 "),a("code",[s._v("mkcert -CAROOT")]),s._v(" 找到对应目录。")]),s._v(" "),a("li",[s._v("把它 copy 到别的机器上。")]),s._v(" "),a("li",[s._v("设置 "),a("code",[s._v("\\$CAROOT")]),s._v(" 为 "),a("code",[s._v("rootCA.pem")]),s._v(" 所在目录。")]),s._v(" "),a("li",[s._v("运行 "),a("code",[s._v("mkcert -install")]),s._v("(arch linux 可以 "),a("code",[s._v("sudo trust anchor --store rootCA.pem")]),s._v("，其它发行版可以用自带的命令手动添加来信任 CA)")])]),s._v(" "),a("p",[s._v("请千万记住 "),a("code",[s._v("mkcert")]),s._v(" 是用于开发目的的，不建议用于生产，所以它不应该被用到用户终端上，并且你不应该导出或者共享 "),a("code",[s._v("rootCA-key.pem")]),s._v(" 。")])])}),[],!1,null,null,null);a.default=r.exports}}]);