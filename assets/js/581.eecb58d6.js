(window.webpackJsonp=window.webpackJsonp||[]).push([[581],{906:function(s,a,e){"use strict";e.r(a);var t=e(4),n=Object(t.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"useradd"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#useradd"}},[s._v("#")]),s._v(" useradd")]),s._v(" "),a("p",[s._v("创建的新的系统用户")]),s._v(" "),a("h2",{attrs:{id:"补充说明"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#补充说明"}},[s._v("#")]),s._v(" 补充说明")]),s._v(" "),a("p",[a("strong",[s._v("useradd命令")]),s._v(" 用于Linux中创建的新的系统用户。useradd可用来建立用户帐号。帐号建好之后，再用passwd设定帐号的密码．而可用userdel删除帐号。使用useradd指令所建立的帐号，实际上是保存在"),a("code",[s._v("/etc/passwd")]),s._v("文本文件中。")]),s._v(" "),a("p",[s._v("在Slackware中，adduser指令是个script程序，利用交谈的方式取得输入的用户帐号资料，然后再交由真正建立帐号的useradd命令建立新用户，如此可方便管理员建立用户帐号。在Red Hat Linux中， "),a("strong",[s._v("adduser命令")]),s._v(" 则是useradd命令的符号连接，两者实际上是同一个指令。")]),s._v(" "),a("h3",{attrs:{id:"语法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#语法"}},[s._v("#")]),s._v(" 语法")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("useradd"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("选项"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("参数"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"选项"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#选项"}},[s._v("#")]),s._v(" 选项")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("-b, --base-dir BASE_DIR  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 如果未指定 -d HOME_DIR，则系统的默认基本目录。如果未指定此选项，useradd 将使用 /etc/default/useradd 中的 HOME 变量指定的基本目录，或默认使用 /home。")]),s._v("\n-c, "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--comment")]),s._v(" COMMENT    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 加上备注文字。任何文本字符串。它通常是对登录名的简短描述，目前用作用户全名的字段。")]),s._v("\n-d, "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--home")]),s._v(" HOME_DIR      "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 将使用 HOME_DIR 作为用户登录目录的值来创建新用户。 ")]),s._v("\n-D, "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--defaults")]),s._v("           "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 变更预设值。")]),s._v("\n-e, "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--expiredate")]),s._v(" EXPIRE_DATE "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 用户帐户将被禁用的日期。 日期以 YYYY-MM-DD 格式指定。")]),s._v("\n-f, "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--inactive")]),s._v(" INACTIVE      "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 密码过期后到帐户被永久禁用的天数。")]),s._v("\n-g, "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--gid")]),s._v(" GROUP   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 用户初始登录组的组名或编号。组名必须存在。组号必须引用已经存在的组。")]),s._v("\n-G, "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--groups")]),s._v(" GROUP1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(",GROUP2,"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("."),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(",GROUPN"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 用户也是其成员的补充组列表。每个组用逗号隔开，中间没有空格。")]),s._v("\n-h, "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--help")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 显示帮助信息并退出。")]),s._v("\n-k, "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--skel")]),s._v(" SKEL_DIR "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 骨架目录，其中包含要在用户的主目录中复制的文件和目录，当主目录由 useradd 创建时。")]),s._v("\n-K, "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--key")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("KEY")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("VALUE "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 覆盖 /etc/login.defs 默认值（UID_MIN、UID_MAX、UMASK、PASS_MAX_DAYS 等）。")]),s._v("\n-l, --no-log-init   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 不要将用户添加到 lastlog 和 faillog 数据库。")]),s._v("\n-m, --create-home   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 如果用户的主目录不存在，则创建它。")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-M")]),s._v("                  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 不要创建用户的主目录，即使 /etc/login.defs (CREATE_HOME) 中的系统范围设置设置为 yes。")]),s._v("\n-N, --no-user-group "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 不要创建与用户同名的组，而是将用户添加到由 -g 选项或 /etc/default/useradd 中的 GROUP 变量指定的组中。")]),s._v("\n-o, --non-unique    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 允许创建具有重复（非唯一）UID 的用户帐户。 此选项仅在与 -o 选项结合使用时有效。")]),s._v("\n-p, "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--password")]),s._v(" PASSWORD "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# crypt(3) 返回的加密密码。 默认是禁用密码。")]),s._v("\n-r, "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--system")]),s._v("        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建一个系统帐户。")]),s._v("\n-s, "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--shell")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("SHELL")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 用户登录 shell 的名称。")]),s._v("\n-u, "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--uid")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("UID")]),s._v("       "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 用户 ID 的数值。")]),s._v("\n-U, --user-group    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建一个与用户同名的组，并将用户添加到该组。")]),s._v("\n-Z, --selinux-user SEUSER "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 用户登录的 SELinux 用户。 默认情况下将此字段留空，这会导致系统选择默认的 SELinux 用户。")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 更改默认值")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 当仅使用 -D 选项调用时，useradd 将显示当前默认值。 当使用 -D 和其他选项调用时，useradd 将更新指定选项的默认值。 有效的默认更改选项是：")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br")])]),a("h3",{attrs:{id:"参数"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#参数"}},[s._v("#")]),s._v(" 参数")]),s._v(" "),a("p",[s._v("用户名：要创建的用户名。")]),s._v(" "),a("h3",{attrs:{id:"退出值"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#退出值"}},[s._v("#")]),s._v(" 退出值")]),s._v(" "),a("p",[a("code",[s._v("useradd")]),s._v(" 命令以以下值退出：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" 成功\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" 无法更新密码文件\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" 无效的命令语法\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" 选项的无效参数\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("UID")]),s._v(" 已经在使用（并且没有 -o）\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" 指定的组不存在\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9")]),s._v(" 用户名已被使用\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(" 无法更新组文件\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(" 无法创建主目录\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(" 无法创建邮件假脱机\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("14")]),s._v(" 无法更新 SELinux 用户映射\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br")])]),a("h3",{attrs:{id:"文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#文件"}},[s._v("#")]),s._v(" 文件")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("/etc/passwd "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 用户帐户信息。")]),s._v("\n/etc/shadow "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 保护用户帐户信息。")]),s._v("\n/etc/group  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 组帐户信息。")]),s._v("\n/etc/gshadow "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 保护组帐户信息。")]),s._v("\n/etc/default/useradd "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 帐户创建的默认值。")]),s._v("\n/etc/skel/                                 "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 包含默认文件的目录。")]),s._v("\n/etc/login.defs "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 影子密码套件配置。")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("h3",{attrs:{id:"实例"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#实例"}},[s._v("#")]),s._v(" 实例")]),s._v(" "),a("p",[s._v("新建用户加入组：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("useradd")]),s._v(" –g sales jack –G company,employees    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -g：加入主要组、-G：加入次要组")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("建立一个新用户账户，并设置ID：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("useradd")]),s._v(" caojh "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-u")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("544")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("需要说明的是，设定ID值时尽量要大于500，以免冲突。因为Linux安装后会建立一些特殊用户，一般0到499之间的值留给bin、mail这样的系统账号。")]),s._v(" "),a("p",[s._v("新建一个普通用户：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("useradd")]),s._v(" lutixia\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("新建一个系统用户,系统用户一般用于管理服务，无需登录，所以分配nologin，限制其登录系统：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("useradd")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-r")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-s")]),s._v(" /sbin/nologin mq\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("修改创建用户的默认参数，设置密码过期后到永久禁用的不活动时间为30天:")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("useradd")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-D")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-f")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("30")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])])}),[],!1,null,null,null);a.default=n.exports}}]);