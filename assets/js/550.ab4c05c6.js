(window.webpackJsonp=window.webpackJsonp||[]).push([[550],{875:function(s,a,e){"use strict";e.r(a);var t=e(4),n=Object(t.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"timedatectl"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#timedatectl"}},[s._v("#")]),s._v(" timedatectl")]),s._v(" "),a("p",[s._v("用于在 Linux 中设置或查询系统时间、日期和时区等配置。")]),s._v(" "),a("h2",{attrs:{id:"补充说明"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#补充说明"}},[s._v("#")]),s._v(" 补充说明")]),s._v(" "),a("p",[s._v("在 Linux 运维中，通常使用此命令来设置或更改当前的日期、时间和时区，或启用自动系统时钟与远程 NTP 服务器同步，以确保 Linux 系统始终保持正确的时间。")]),s._v(" "),a("h2",{attrs:{id:"概要"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#概要"}},[s._v("#")]),s._v(" 概要")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("timedatectl "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("OPTIONS"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("."),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" COMMAND "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h2",{attrs:{id:"主要用途"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#主要用途"}},[s._v("#")]),s._v(" 主要用途")]),s._v(" "),a("ul",[a("li",[s._v("转换时间到选定的格式，默认为当前。")]),s._v(" "),a("li",[s._v("设置系统时间。")])]),s._v(" "),a("h2",{attrs:{id:"参数"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#参数"}},[s._v("#")]),s._v(" 参数")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("Query or change system "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("time")]),s._v(" and "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("date")]),s._v(" settings.\n\n  "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-h")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--help")]),s._v("                显示帮助信息。\n     "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--version")]),s._v("             显示软件包版本。\n     --no-pager            不用将输出通过管道传输到寻呼机（pager）。\n     --no-ask-password     不提示输入密码。\n  "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-H")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--host")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("USER")]),s._v("@"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("HOST    在远程主机上操作\n  "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-M")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--machine")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("CONTAINER   在本地容器上操作。\n     --adjust-system-clock 更改本地 RTC 模式时调整系统时钟。\n     "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--monitor")]),s._v("\t\t   监控systemd-timesyncd的状态\n  "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--property")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("NAME       仅显示此名称的属性\n  "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-a")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--all")]),s._v("\t\t   显示所有属性，包括空属性\n     "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--value")]),s._v("\t\t   显示属性时，只打印值\n\nCommands:\n  status                   显示当前的时间设置。\n  set-time TIME            设置系统时间。\n  set-timezone ZONE        设置系统时区。\n  list-timezones           显示已知时区。\n  set-local-rtc BOOL       控制 RTC 是否在当地时间。（BOOL 的值可以是 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" / "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v(" 或 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" / false）\n  set-ntp BOOL             启用或禁用网络时间同步。（BOOL 的值可以是 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" / "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v(" 或 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" / false）\n  timesync-status          显示 systemd-timesyncd 的状态。\n  show-timesync            显示 systemd-timesyncd 的属性。\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br")])]),a("h2",{attrs:{id:"例子"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#例子"}},[s._v("#")]),s._v(" 例子")]),s._v(" "),a("p",[s._v("显示系统当前时间和日期")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("$ timedatectl status\n      Local time: 五 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2022")]),s._v("-04-08 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(":06:40 CST\n  Universal time: 五 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2022")]),s._v("-04-08 09:06:40 UTC\n        RTC time: 五 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2022")]),s._v("-04-08 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(":04:02\n       Time zone: Asia/Shanghai "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("CST, +0800"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n     NTP enabled: n/a\nNTP synchronized: no\n RTC "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("local")]),s._v(" TZ: "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("yes")]),s._v("\n      DST active: n/a\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),a("p",[s._v("显示系统所有可用的时区")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("$ timedatectl show\nUnknown operation show\n$ timedatectl list-timezones\nAfrica/Abidjan\nAfrica/Accra\nAfrica/Addis_Ababa\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("p",[s._v("将本地时区从上海（Asia/Shanghai）设置为阿姆斯特丹（Europe/Amsterdam）")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("$ timedatectl set-timezone "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Europe/Amsterdam"')]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("将本地时区设置为协调世界时（UTC）")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("$ timedatectl set-timezone UTC\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("设置系统时间（格式：HH:MM:SS）")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("$ timedatectl set-time "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"07:25:46"')]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("设置系统日期（格式：YYYY-MM-DD）")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("$ timedatectl set-time "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"2021-12-12"')]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("如果只设置日期，那么时间将默认设置为 “00:00:00″（建议同时设置日期和时间）")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("$ timedatectl set-time "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"2021-12-12 07:25:46"')]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("将硬件时钟（RTC）设置为本地时区（不建议，RTC 时钟统一使用 UTC 更恰当，避免在时区更改和夏令时调整方面产生各种问题）")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("$ timedatectl set-local-rtc "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("将硬件时钟（RTC）设置为协调世界时间（UTC）")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("$ timedatectl set-local-rtc "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("启用 NTP 自动时间同步")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("$ timedatectl set-ntp "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("禁用 NTP 自动时间同步")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("$ timedatectl set-ntp "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("查看 systemd-timesyncd 服务的状态")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("$ timedatectl timesync-status\n       Server: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("91.189")]),s._v(".94.4 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("ntp.ubuntu.com"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nPoll interval: 17min 4s "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("min: 32s"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" max 34min 8s"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n         Leap: normal\n      Version: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("\n      Stratum: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n    Reference: 91EECB0E\n    Precision: 1us "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("-23"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nRoot distance: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("29")]),s._v(".922ms "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("max: 5s"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n       Offset: +2.497ms\n        Delay: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("199")]),s._v(".540ms\n       Jitter: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(".834ms\n Packet count: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v("\n    Frequency: +13.039ppm\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br")])]),a("p",[a("code",[s._v("systemd-timedated")]),s._v(" 可能默认配置了谷歌的 NTP 服务器（如 time1.google.com），为了顺利完成网络时间同步，您可以编辑 "),a("code",[s._v("/etc/systemd/timesyncd.conf")]),s._v(" 文件添加自己的 NTP 服务器地址。")])])}),[],!1,null,null,null);a.default=n.exports}}]);